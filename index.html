<!DOCTYPE html>
<html>
<head>
  <title>Chakra Tracker</title>
  <style>
    body {
      font-family: sans-serif;
    }

    #messageArea {
      margin-top: 10px;
      color: red;
    }

    #jutsuItems li {
      cursor: context-menu;
    }

    #inputArea {
      border-bottom: 2px solid black;
      /* Add black bar below input area */
      padding-bottom: 10px;
    }

    #jutsuList {
      background-color: #f7e9d2;
      /* Old paper background color */
      border: 3px solid #b59a78;
      /* Old paper border color */
      padding: 15px;
      margin-top: 10px;
    }

    #jutsuItems {
      list-style: none;
      padding: 0;
      font-family: 'Courier New', Courier, monospace;
      /* Use a monospace font for a typewriter effect */
      line-height: 1.5em;
      /* Adjust line spacing */
    }
  </style>
</head>
<body>
  <h1>Chakra Tracker</h1>

  <div id="inputArea">
    <div>
      Max Chakra: <input type="number" id="maxChakra" value="10">
      Replenish Rate: <input type="number" id="replenishRate" value="0">
      <button onclick="initializeTracker()">Initialize</button>
    </div>
    <div id="chakraInfo">
      Current Chakra: <span id="currentChakra">0</span>/<span id="maxChakraDisplay">0</span>
    </div>
    <div>
      Jutsu Name: <input type="text" id="jutsuName">
      Chakra Cost: <input type="number" id="jutsuCost">
      <button onclick="addJutsu()">Add Jutsu</button>
    </div>
    <div>
      Jutsu to Use: <input type="text" id="jutsuToUse">
      <button onclick="useJutsu()">Use Jutsu</button>
    </div>
    <div>
      <button onclick="recoverChakra()">Recover Chakra</button>
    </div>
    <div>
      <button onclick="saveData()">Save Data</button>
      <input type="file" id="fileInput" accept=".txt">
      <button onclick="loadData()">Load Data</button>
    </div>
  </div>

  <div id="jutsuList">
    <h2>Available Jutsu:</h2>
    <ul id="jutsuItems"></ul>
  </div>
  <div id="messageArea"></div>

  <script>
    let chakraTracker;
    const messageArea = document.getElementById("messageArea");
    const maxChakraInput = document.getElementById("maxChakra");
    const replenishRateInput = document.getElementById("replenishRate");
    const jutsuNameInput = document.getElementById("jutsuName");
    const jutsuCostInput = document.getElementById("jutsuCost");
    const fileInput = document.getElementById("fileInput");

    function displayMessage(message, isError = true) {
      messageArea.textContent = message;
      messageArea.style.color = isError? "red": "green";
    }

    function initializeTracker() {
      const maxChakra = parseInt(maxChakraInput.value);
      const replenishRate = parseFloat(replenishRateInput.value);

      if (isNaN(maxChakra) || maxChakra <= 0) {
        displayMessage("Invalid Max Chakra.", true);
        return;
      }
      if (isNaN(replenishRate) || replenishRate < 0) {
        displayMessage("Invalid Replenish Rate.", true);
        return;
      }

      chakraTracker = new ChakraTracker(maxChakra, replenishRate);
      updateDisplay();
    }

    class ChakraTracker {
      constructor(maxChakra, replenishRate = 0) {
        this.maxChakra = maxChakra;
        this.replenishRate = replenishRate;
        this.currentChakra = this.maxChakra;
        this.lastReplenishTime = Date.now();
        this.jutsuList = {};
      }

      //... (Other ChakraTracker methods)

      addJutsu() {
        const jutsuName = jutsuNameInput.value;
        const chakraCost = parseInt(jutsuCostInput.value);

        if (!jutsuName || isNaN(chakraCost) || chakraCost <= 0) {
          displayMessage("Invalid jutsu name or chakra cost.", true);
          return;
        }

        this.jutsuList[jutsuName] = chakraCost;
        this.displayJutsuList(); // Call displayJutsuList() here to update in real-time
        saveData();
        jutsuNameInput.value = "";
        jutsuCostInput.value = "";
        displayMessage("Jutsu added successfully!", false);
      }

      //... (Other ChakraTracker methods)
    }

    function addJutsu() {
      if (chakraTracker) {
        chakraTracker.addJutsu();
      }
    }

    function saveData() {
      //... (saveData function - no changes)
    }

    function loadData() {
      //... (loadData function - no changes)
    }

    function updateDisplay() {
      //... (updateDisplay function - no changes)
    }

    // Initialize the tracker when the page loads
    initializeTracker();
    setInterval(updateDisplay, 1000);
  </script>
</body>
</html>
